> ⚠️ このREADMEは開発者向けの作業ログと再開ガイドです。ユーザー向け説明は Streamlit アプリ側をご覧ください。

# 🗂 ゆうちょ明細 → freee形式変換ツール：開発ログ＆引継ぎノート

## ✅ プロジェクト目的

**freeeで取り込めない・整っていないCSV明細（特にゆうちょ銀行）を、freee対応形式に変換するシンプルなツールを作成。**

- ゆうちょ明細CSVの構造に準拠
- freeeの手動アップロード用フォーマットに完全対応
- 将来的にはStreamlitでUI提供、さらに有料化・自動分類・他行対応なども検討

---

## ✅ 現状の進捗（2025-08-05）

### 1. 明細CSVの実物確認 ✅

- ゆうちょダイレクトから**CSV形式でDL可能**であると判明（PDF変換は不要）
- フォーマットは以下のような構造：

```csv
取引日,入出金明細ＩＤ,受入金額（円）,払出金額（円）,詳細１,詳細２,現在（貸付）高,
20250728,202507280000001,,50550,自払,ﾔﾁﾝ ﾄｳ,302551,
```

---

### 2. freeeの要求フォーマット確認 ✅

freeeが求めるCSVフォーマット：

```
取引日,出金額,入金額,残高,取引内容
```

---

### 3. Python変換スクリプト作成 ✅

**`yuucho_to_freee_converter.py`** が正常に動作し、CSVを変換して保存できるようになった。

- `pandas` で読み込み
- `cp932` 文字コード対応済み
- ヘッダー行は `header=7` で読み込む
- 日付整形済み（YYYY-MM-DD）
- 出金/入金/残高/摘要も問題なし
- `output/freee明細.csv` に保存される
- 動作ログも出力される

✅ 実行結果確認済み！

---

### 4. エラー対応ログ

| 問題                 | 解決策                          |
| ------------------ | ---------------------------- |
| FileNotFoundError  | パスを `../sample_data/...` に修正 |
| UnicodeDecodeError | `encoding="cp932"` を追加       |
| '取引日' エラー          | `header=7` に変更し列を正確に取得       |

---

## 🔁 ディレクトリ構成（現時点）

```
yuucho-to-freee/
├── app/
│   └── yuucho_to_freee_converter.py  ← 変換ロジック（CLI用）
├── sample_data/
│   └── sample_yuucho.csv             ← 入力CSV
├── output/
│   └── freee明細.csv                 ← 出力CSV（utf-8-sigで保存）
├── requirements.txt
└── README.md
```

---

## 🧠 思考プロセスまとめ

| ステップ                 | 意図                         |
| -------------------- | -------------------------- |
| 🧐 「PDF変換が必要では？」と思った | → だがCSVがDL可能なことが判明し方向転換    |
| 📊 実際のCSV構造を調査       | → 「整ってないCSVを整形する」に課題があると確認 |
| 🔄 スクリプト試行錯誤         | → ファイルパス、エンコーディング、ヘッダー行に注意 |
| ✅ freee形式に合致         | → 実務でそのままアップロードできる形に成功     |

---

## ✅ 次にやること（TODO）

| 優先度  | やること                      | 状態   |
| ---- | ------------------------- | ---- |
| ⭐️ 高 | Streamlit化（ファイルアップ→DLボタン） | 未着手  |
| ⭐️ 中 | 自動分類（例：「摘要 → 勘定科目」推定）     | 未着手  |
| ⭐️ 中 | LP + note記事 + SNS流入導線の設計  | 未着手  |
| ⭐️ 中 | Stripe/Gumroadによる有料化導線    | 構想あり |
| ⭐️ 低 | 他銀行対応 / PDF対応 / OCR対応     | 構想のみ |

---

## 🧰 Streamlit化したい人向けメモ

- ファイルアップロード → 変換処理を `yuucho_to_freee_converter.py` に委譲
- 出力を `io.StringIO()` に保存し、`st.download_button()` で返す
- 基本的なテンプレートはこのチャット内にあり（必要なら再出力可能）

---

## 💡 将来的な収益化アイデア

| モデル       | 概要                            |
| --------- | ----------------------------- |
| フリーミアム    | 1回無料、2回目から課金（月980円など）         |
| 回数課金      | 明細1枚ごとに課金（Stripe checkout）    |
| バンドル      | 「自動仕訳 + freee形式変換 + 会計初心者ガイド」 |
| コンサル/書籍連携 | note記事で会計初心者を呼び込み、導線設計        |

---

## 🧭 セッション再開用キーワード

- `yuucho-to-freee` プロジェクト
- `freee形式 CSV 変換`
- `Streamlit CSVアップローダー`
- `cp932 読み込み pandas`
- `ゆうちょ明細 freee手動アップロード`

---

## ✅ 再開のときにやるべきこと（順番付き）

1. `yuucho_to_freee_converter.py` をもう一度動かしてみる
2. Streamlitテンプレを組み込みたい場合は `app_ui.py` を作成
3. 「自動仕訳ロジック」「販売導線」などを順次追加

---

## 🔁 プロジェクト再開ガイド（2025-08-05 時点）
こちらが、**今の作業の全体状況・再開方法・チャットの再接続方法**までをまとめた
✅ **「ゆうちょ明細 → freee変換」プロジェクトの引継ぎノート（再開ガイド付き）**です。

---

## 🗂 `yuucho-to-freee` プロジェクト引継ぎノート（再開ガイド付き）

### ✅ プロジェクト概要

- ゆうちょ銀行のCSV明細（非対応形式）を
  → freee対応CSV（アップロード用形式）に変換するツール
- StreamlitベースでWeb UIを提供
- 今は **仮公開・需要検証フェーズ**（商用展開は後で判断）

---

### 📦 現在のディレクトリ構成

```
yuucho-to-freee/
├── app/
│   ├── app_ui.py（※未使用 or 廃止OK）
│   └── yuucho_to_freee_converter.py  ← 変換ロジック
├── output/                            ← freee形式CSVを保存
├── sample_data/                       ← サンプルデータ保管
│   ├── sample_yuucho.csv
│   └── sample_output_freee.csv
├── streamlit_app.py                   ← UIのメインエントリーポイント
├── main.py                            ← CLI実行用スクリプト
├── requirements.txt                   ← pandas, streamlit
├── .gitignore                         ← 不要ファイル除外済
└── README.md                          ← 自分用の開発ログ・進捗メモ
```

---

### 🧠 状況メモ（2025-08-05 時点）

- `yuucho_to_freee_converter.py` は正常に動作（freee形式CSVが出力される）
- `streamlit_app.py` でWeb UIを構築済（ファイルアップ→変換→DL）
- GitHubにはまだアップロードしていない（仮名 `promptlabo` アカウント）
- Cloud公開はこれから（Streamlit Cloudに接続予定）
- `.gitignore` や `requirements.txt` は最低限・問題なし
- READMEは開発者メモとして運用中（ユーザー説明なしでもOK）

---

### ✅ 再開のときにやること（おすすめ順）

1. **仮想環境の有効化（cmdで）**

   ```bash
   venv\Scripts\activate
   ```

2. **Streamlitでアプリ起動（ローカル確認）**

   ```bash
   streamlit run streamlit_app.py
   ```

3. ブラウザで `http://localhost:8501` を開く
   → ファイル選択 → 変換 → ダウンロードできればOK

4. 必要に応じて `main.py`（CLI版）で変換も可

   ```bash
   python main.py
   ```

---

### ☁️ 公開・展開ステップ（必要時）

| ステップ         | 内容                                                      |
| ------------ | ------------------------------------------------------- |
| ✅ GitHubにアップ | 仮名 `promptlabo` アカウントを使用で問題なし                           |
| ✅ Cloud公開    | [Streamlit Cloud](https://streamlit.io/cloud) に接続してデプロイ |
| ✅ ドメイン設定（任意） | 独自ドメイン or SNS/Noteと連携                                   |
| ✅ 商用展開検討     | 需要が見えたらブランド名変更・有料化・自動仕訳などを実装                            |

---

### 📥 Streamlit アプリ仕様（再掲）

- 入力：`ゆうちょCSV（cp932形式）`
- 出力：freee対応形式（`utf-8-sig`, カラム変換済）
- UI要素：

  - ファイルアップロード
  - ダウンロードボタン
  - 明細プレビュー（上5件）
  - 変換成功メッセージ

---

### 🧭 セッション再開キーワード（このチャットで使う）

このプロジェクトを再開したい時は、チャットで以下のいずれかを入力：

```
yuucho-to-freee
Streamlit UI再開したい
freee形式 CSV 変換ツールの続き
ゆうちょ明細 変換プロジェクト
```

---

### 💡 補足メモ

- `static/` は未使用 → 存在しても削除してOK
- `__pycache__/`, `.pyc`, `output/` などは `.gitignore` で除外済
- 現時点では仮名での公開でOK → 需要が見えたらブランド名・LP・価格設計へ進める
